<div class="container">
    <div class="row justify-content-between">
        <div class="col-12">
            <p-fileUpload styleClass="shadow-md" name="demo[]" customUpload="true" maxFileSize="1000000" fileLimit="1" (uploadHandler)="onUpload($event)" (onClear)="onCancel()" chooseLabel="Browse">
                <ng-template pTemplate="toolbar">
                    <div *ngIf="cartasEncontradas.length > 0" class="float-right">
                        <button pButton label="Guardar en album" icon="pi pi-save" (click)="guardarCartasEnAlbum()"></button>
                        <button pButton label="Crear album" icon="pi pi-plus" class="p-button-success" (click)="crearAlbum()"></button>
                    </div>
                </ng-template>
                <ng-template let-file pTemplate="file">
                    <div class="row justify-content-center">
                        <div class="col-9">
                            <span>{{file.name}}</span>
                            <span class="float-right">{{file.size}} bytes</span>
                        </div>
                    </div>
                </ng-template>
                <ng-template pTemplate="content" let-files>
                    <div *ngIf="files.length==0" class="row justify-content-center">
                        <span>Pulsa <em>Browse</em> para comenzar a importar un fichero.</span>
                    </div>
                </ng-template>
            </p-fileUpload>
        </div>
    </div>

    <div *ngIf="cartasEncontradas.length > 0" class="row">
        <div class="col-12">
            <div class="card shadow mt-5" style="border-radius:6px;">
                <p-table [value]="cartasEncontradas" responsiveLayout="scroll" style="border-radius:6px;">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Nombre</th>
                            <th>Set</th>
                            <th>Rareza</th>
                            <th>Imagen HD</th>
                            <th></th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-data>
                        <!-- IF CARTA -->
                        <tr *ngIf="data.carta">
                            <td><button class="btn btn-link" [lightbox]="cartasEncontradas.indexOf(data)">{{data.carta.name}}</button></td>
                            <td><span [innerHTML]="data.carta.set | edicion:'26px' | async"></span></td>
                            <td [ngClass]="getCssRarity(data.carta.rarity)">{{data.carta.rarity}}</td>
                            <td>
                                <i *ngIf="data.fullResImg" class='pi pi-check'></i>
                                <i *ngIf="!data.fullResImg" class='pi pi-times'></i>
                                <!-- {{ data.fullResImg ? 'SÃ­' : 'No' }} -->
                            </td>
                            <td>
                                <button pButton type="button" icon="pi pi-pencil" class="p-button-sm p-button-outlined m-1" (click)="editarItem(data)"></button>
                                <button pButton type="button" icon="pi pi-times" class="p-button-sm p-button-danger p-button-outlined m-1" (click)="eliminarItem(data)"></button>
                            </td>
                        </tr>
                        <!-- IF NO CARTA -->
                        <tr *ngIf="!data.carta" class="text-danger" style="background-color: #FFCCCC;">
                            <td>
                                <i class="pi pi-exclamation-circle m-2"></i> {{data.textoBuscado}}
                            </td>
                            <td colspan="3" class="text-center">
                                Carta no encontrada &nbsp;
                            </td>
                            <td>
                                <button class="btn btn-danger" (click)="editarItem(data)">editar</button>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
    </div>
</div>